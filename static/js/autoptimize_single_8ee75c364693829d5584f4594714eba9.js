var winWidth=jQuery(window).width();var loadedInitially=false
var myChart;var investment=25000;var year=10;var rate=6.5;var amountSlider=document.getElementById('amount-rangslider');var returnSlider=document.getElementById('return-rangslider');var durationSlider=document.getElementById('duration-rangslider');var targetInvestment=25000;var targetYear=10;var targetRate=6.5;var targetAmountSlider=document.getElementById('target-amount-rangslider');var targetReturnSlider=document.getElementById('target-return-rangslider');var targetDurationSlider=document.getElementById('target-duration-rangslider');accordion();function footerAcc(){jQuery(".popular-links .title").click(function(){jQuery(this).next(".links-wrap").stop(true,true).slideToggle();jQuery(this).toggleClass("active")})}
function mobMenu(){jQuery(".cp-header .menu-btn").on("click",function(){jQuery(this).toggleClass("open");jQuery(".cp-header nav").toggleClass("open")})}
jQuery(function(){if(winWidth<767){footerAcc();mobMenu()}
if(jQuery(".scroll-to-tab").length){var topPos=jQuery(".scroll-to-tab").offset().top;scrollToSection();}
var windowScrollPos;jQuery(window).on("scroll",function(e){windowScrollPos=jQuery(window).scrollTop();if(jQuery(this).scrollTop()>=70){jQuery(".cp-header").addClass("sticky")}else{jQuery(".cp-header").removeClass("sticky")}
if(winWidth>767){if(windowScrollPos>topPos){jQuery(".scroll-to-tab").addClass("sticky-me");}else{jQuery(".scroll-to-tab").removeClass("sticky-me");}}})});function accordion(){jQuery('.acc-head').click(function(e){var jQuerythis=jQuery(this);var parentElm=jQuerythis.closest(".acc-item");if(jQuerythis.hasClass("active")){parentElm.find(".acc-cont").removeClass("active");jQuerythis.removeClass("active");parentElm.find(".acc-cont").slideUp()}else{jQuery(".cp-accordion").find(".acc-cont").removeClass("active");jQuery(".cp-accordion").find(".acc-head").removeClass("active");jQuery(".cp-accordion").find(".acc-cont").slideUp();parentElm.find(".acc-cont, .acc-head").addClass("active");parentElm.find(".acc-cont").slideDown()}})}
function slidersInit(){if(loadedInitially){amountSlider.noUiSlider.reset();returnSlider.noUiSlider.reset();durationSlider.noUiSlider.reset();}
noUiSlider.create(amountSlider,{start:50000,connect:'lower',range:{'min':50000,'max':500000},step:10000,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(returnSlider,{start:4,connect:'lower',step:0.1,range:{'min':2,'max':8},format:{to:(v)=>parseFloat(v).toFixed(1),from:(v)=>parseFloat(v).toFixed(1)}});noUiSlider.create(durationSlider,{start:10,connect:'lower',range:{'min':1,'max':30},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});amountSlider.noUiSlider.on('update',function(values,handle){investment=Number(values[handle]);document.getElementById("amt-val").value=values[handle];calculatePpf(investment,year,rate)});returnSlider.noUiSlider.on('update',function(values,handle){rate=Number(values[handle]);document.getElementById("ret-val").value=values[handle];calculatePpf(investment,year,rate)});durationSlider.noUiSlider.on('update',function(values,handle){year=Number(values[handle]);document.getElementById("duration-val").value=values[handle];calculatePpf(investment,year,rate)});calculatePpf(investment,year,rate)}
function inputChange(value){year=Number(document.getElementById("duration-val").value);investment=Number(document.getElementById("amt-val").value);rate=Number(document.getElementById("ret-val").value);switch(value){case 1:if(investment!=0&&investment!=''){setTimeout(()=>{amountSlider.noUiSlider.set(investment);},3000);}
break;case 2:if(rate!=0&&rate!=''){setTimeout(()=>{returnSlider.noUiSlider.set(rate);},2000);}
break;case 3:if(year!=0&&year!=''){setTimeout(()=>{durationSlider.noUiSlider.set(year);},2000);}
break;}}
var barChartData={labels:[""],datasets:[{backgroundColor:"#C6C2F9",stack:'Stack 1',data:[3]},{backgroundColor:"#C6C2F9",stack:'Stack 0',data:['',4]},{backgroundColor:"#5F40AF",stack:'Stack 0',data:['',10]},]};var ctx=document.getElementById('myChart').getContext('2d');var ctx2=document.getElementById('myChart2').getContext('2d');myChart=new Chart(ctx,{type:'bar',data:barChartData,options:{responsive:true,scaleShowLabels:false,plugins:{legend:{display:false},title:{display:false,text:''},tooltip:{enabled:false},},scales:{xAxes:[{gridLines:{show:false,stacked:true,lineWidth:0}}],yAxes:{display:false,stacked:true,}}}});myChart2=new Chart(ctx2,{type:'bar',data:barChartData,options:{responsive:true,scaleShowLabels:false,plugins:{legend:{display:false},title:{display:false,text:''},tooltip:{enabled:false},},scales:{xAxes:[{gridLines:{show:false,stacked:true,lineWidth:0}}],yAxes:{display:false,stacked:true,}}}});function calculatePpf(amount,tenure){let initialInvestment=amount;let totalInvested=amount;let principal=0;let previousBalance=0;let interest=0;let maturityAmount=0;let gains=0;let gainsPercentage=0;for(let i=0;i<tenure;i++){principal=initialInvestment+maturityAmount;interest=parseFloat((principal*(rate/100)).toFixed(2));maturityAmount=principal+interest;gains=maturityAmount-totalInvested;gainsPercentage=(gains/totalInvested)*100;initialInvestment=0;}
document.getElementById('invest_amount').innerText=numberWithCommas(totalInvested);document.getElementById('total_amount_pill').innerText=numberWithCommas(Math.round(maturityAmount));document.getElementById('total_amount').innerText=numberWithCommas(Math.round(maturityAmount));document.getElementById('return_amount').innerText=numberWithCommas(Math.round(gains));myChart.data.datasets=[{borderRadius:{topLeft:10,topRight:10,},data:[totalInvested],backgroundColor:'#C6C2F9',stack:"stack 1",},{data:[totalInvested],backgroundColor:'#C6C2F9',stack:"stack 0",},{borderRadius:{topLeft:10,topRight:10,},data:[maturityAmount],stack:"stack 0",backgroundColor:'#5F40AF',}];myChart.update();}
function targetslidersInit(){if(loadedInitially){targetAmountSlider.noUiSlider.reset();targetReturnSlider.noUiSlider.reset();targetDurationSlider.noUiSlider.reset();}
noUiSlider.create(targetAmountSlider,{start:100000,connect:'lower',range:{'min':100000,'max':5000000},step:100000,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(targetReturnSlider,{start:4,connect:'lower',range:{'min':2,'max':8},format:{to:(v)=>parseFloat(v).toFixed(1),from:(v)=>parseFloat(v).toFixed(1)}});noUiSlider.create(targetDurationSlider,{start:10,connect:'lower',range:{'min':1,'max':30},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});targetAmountSlider.noUiSlider.on('update',function(values,handle){targetInvestment=Number(values[handle]);document.getElementById("target-val").value=values[handle];calculateTargetAmount(targetInvestment,targetRate,targetYear);});targetReturnSlider.noUiSlider.on('update',function(values,handle){targetRate=Number(values[handle]);document.getElementById("target-ret-val").value=values[handle];calculateTargetAmount(targetInvestment,targetRate,targetYear);});targetDurationSlider.noUiSlider.on('update',function(values,handle){targetYear=Number(values[handle]);document.getElementById("target-duration-val").value=values[handle];calculateTargetAmount(targetInvestment,targetRate,targetYear);});calculateTargetAmount(targetInvestment,targetRate,targetYear);}
function targetInputChange(value){targetYear=Number(document.getElementById("target-duration-val").value);targetInvestment=Number(document.getElementById("target-val").value);targetRate=Number(document.getElementById("target-ret-val").value);switch(value){case 1:if(targetInvestment!=0&&targetInvestment!=''){setTimeout(()=>{targetAmountSlider.noUiSlider.set(targetInvestment);},3000);}
break;case 2:if(targetRate!=0&&targetRate!=''){setTimeout(()=>{targetReturnSlider.noUiSlider.set(targetRate);},2000);}
break;case 3:if(targetYear!=0&&targetYear!=''){setTimeout(()=>{targetDurationSlider.noUiSlider.set(targetYear);},2000);}
break;}}
function calculateTargetAmount(targetAmount,targetRate,targetTenure){let initialPrincipal=0;let maturityValue=targetAmount;for(let i=1;i<=targetTenure;i++){initialPrincipal=parseFloat((maturityValue*1000)/(1000+(targetRate*(10)))).toFixed(1);maturityValue=initialPrincipal;}
document.getElementById('invest_amount').innerText=numberWithCommas(Math.round(initialPrincipal));document.getElementById('total_amount_pill').innerText=numberWithCommas(Math.round(targetAmount));document.getElementById('total_amount').innerText=numberWithCommas(Math.round(targetAmount));document.getElementById('roi').innerText=targetRate;document.getElementById('inv_amt').innerText=numberWithCommas(Math.round(initialPrincipal));document.getElementById('inv_duration').innerText=targetTenure
myChart2.data.datasets=[{borderRadius:{topLeft:10,topRight:10,},data:[maturityValue],backgroundColor:'#C6C2F9',stack:"stack 1",},{data:[maturityValue],backgroundColor:'#C6C2F9',stack:"stack 0",},{borderRadius:{topLeft:10,topRight:10,},data:[targetAmount],stack:"stack 0",backgroundColor:'#5F40AF',}];myChart2.update();}
targetslidersInit();slidersInit();loadedInitially=true;jQuery('#myChart2').hide();jQuery('.target-amt').hide();jQuery('.interest-applied').hide();jQuery('.fd-select input[type=radio]').on('change',function(event){if(jQuery(this).attr('id')==='target-amount'){jQuery('.tab-content').hide();jQuery('.target-amt').show();jQuery('.amount-gain').hide();jQuery('.interest-applied').show();jQuery('#invest_title').text('Invest');jQuery('#invest_value').text('Target Amount');jQuery('#myChart2').show();jQuery('#myChart').hide();targetslidersInit();}else{jQuery('.tab-content').hide();jQuery('.fd-invest').show();jQuery('.amount-gain').show();jQuery('.interest-applied').hide();jQuery('#invest_title').text('Total Investment');jQuery('#invest_value').text('Maturity Value');jQuery('#myChart2').hide();jQuery('#myChart').show();slidersInit();}})
function numberWithCommas(x){return x.toString().split('.')[0].length>3?x.toString().substring(0,x.toString().split('.')[0].length-3).replace(/\B(?=(\d{2})+(?!\d))/g,",")+","+x.toString().substring(x.toString().split('.')[0].length-3):x.toString();}
jQuery("#calc_dropdown").click(function(){jQuery(".dropdown-menu").toggleClass("show");});jQuery(function(){jQuery('.lyt-calculator .question-list a[href*=\\#]').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=jQuery(this.hash);target=target.length?target:jQuery('[name='+this.hash.slice(1)+']');if(target.length){jQuery('html,body').animate({scrollTop:target.offset().top-100},1000);return false;}}});});