var winWidth=jQuery(window).width();var age,retirementAge,income,roi,savingsPerMonth,existingSavings,roiSaving;var ageSlider=document.getElementById('age-rangslider');var retirementAgeSlider=document.getElementById('retirement-rangslider');var incomeSlider=document.getElementById('income-rangslider');var roiSlider=document.getElementById('rateOfInterest-rangslider');var savingPerMonthSlider=document.getElementById('currentSaving-rangslider');var existingSavingsSlider=document.getElementById('existingSavings-rangslider');var roiSavingSlider=document.getElementById('roiSavings-rangslider');accordion();function footerAcc(){jQuery(".popular-links .title").click(function(){jQuery(this).next(".links-wrap").stop(true,true).slideToggle();jQuery(this).toggleClass("active")})}
function mobMenu(){jQuery(".cp-header .menu-btn").on("click",function(){jQuery(this).toggleClass("open");jQuery(".cp-header nav").toggleClass("open")})}
jQuery(function(){if(winWidth<767){footerAcc();mobMenu()}
if(jQuery(".scroll-to-tab").length){var topPos=jQuery(".scroll-to-tab").offset().top;scrollToSection();}
var windowScrollPos;jQuery(window).on("scroll",function(e){windowScrollPos=jQuery(window).scrollTop();if(jQuery(this).scrollTop()>=70){jQuery(".cp-header").addClass("sticky")}else{jQuery(".cp-header").removeClass("sticky")}
if(winWidth>767){if(windowScrollPos>topPos){jQuery(".scroll-to-tab").addClass("sticky-me");}else{jQuery(".scroll-to-tab").removeClass("sticky-me");}}})});function accordion(){jQuery('.acc-head').click(function(e){var jQuerythis=jQuery(this);var parentElm=jQuerythis.closest(".acc-item");if(jQuerythis.hasClass("active")){parentElm.find(".acc-cont").removeClass("active");jQuerythis.removeClass("active");parentElm.find(".acc-cont").slideUp()}else{jQuery(".cp-accordion").find(".acc-cont").removeClass("active");jQuery(".cp-accordion").find(".acc-head").removeClass("active");jQuery(".cp-accordion").find(".acc-cont").slideUp();parentElm.find(".acc-cont, .acc-head").addClass("active");parentElm.find(".acc-cont").slideDown()}})}
function slidersInit(){noUiSlider.create(ageSlider,{start:30,connect:'lower',range:{'min':1,'max':50},step:1,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(retirementAgeSlider,{start:40,connect:'lower',range:{'min':40,'max':80},step:1,format:{to:(v)=>parseFloat(v).toFixed(1),from:(v)=>parseFloat(v).toFixed(1)}});noUiSlider.create(incomeSlider,{start:1000,connect:'lower',range:{'min':1000,'max':5000000},step:1000,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(roiSlider,{start:5,connect:'lower',range:{'min':5,'max':7},step:0.1,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(savingPerMonthSlider,{start:10000,connect:'lower',range:{'min':1000,'max':500000},step:1000,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(existingSavingsSlider,{start:0,connect:'lower',range:{'min':0,'max':5000000},step:1000,format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});noUiSlider.create(roiSavingSlider,{start:5,connect:'lower',range:{'min':5,'max':20},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0)}});ageSlider.noUiSlider.on('update',function(values,handle){age=Number(values[handle]);document.getElementById("current-age").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});retirementAgeSlider.noUiSlider.on('update',function(values,handle){retirementAge=Number(values[handle]);document.getElementById("retirement-age").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});incomeSlider.noUiSlider.on('update',function(values,handle){income=Number(values[handle]);document.getElementById("income-required").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});roiSlider.noUiSlider.on('update',function(values,handle){roi=Number(values[handle]);document.getElementById("expected-roi").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});savingPerMonthSlider.noUiSlider.on('update',function(values,handle){savingsPerMonth=Number(values[handle]);document.getElementById("current-saving").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});existingSavingsSlider.noUiSlider.on('update',function(values,handle){existingSavings=Number(values[handle]);document.getElementById("existing-saving").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});roiSavingSlider.noUiSlider.on('update',function(values,handle){roiSaving=Number(values[handle]);document.getElementById("roi-saving").value=values[handle];calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));});calculateRequiredSavings(savingsPerMonth,existingSavings,roiSaving,age,retirementAge,calculateRetirementAmount(income,roi));}
slidersInit();function inputChange(value){age=Number(document.getElementById("current-age").value);retirementAge=Number(document.getElementById("retirement-age").value);income=Number(document.getElementById("income-required").value);roi=Number(document.getElementById("expected-roi").value);savingsPerMonth=Number(document.getElementById("current-saving").value);existingSavings=Number(document.getElementById("existing-saving").value);roiSaving=Number(document.getElementById("roi-saving").value);switch(value){case 1:if(age!=0&&age!=''){setTimeout(()=>{ageSlider.noUiSlider.set(age);},2000);}
break;case 2:if(retirementAge!=0&&retirementAge!=''){setTimeout(()=>{retirementAgeSlider.noUiSlider.set(retirementAge);},2000);}
break;case 3:if(income!=0&&income!=''){setTimeout(()=>{incomeSlider.noUiSlider.set(income);},2000);}
case 4:if(roi!=0&&roi!=''){setTimeout(()=>{roiSlider.noUiSlider.set(roi);},2000);}
break;case 5:if(savingsPerMonth!=0&&savingsPerMonth!=''){setTimeout(()=>{savingPerMonthSlider.noUiSlider.set(savingsPerMonth);},2000);}
break;case 6:if(existingSavings!=0&&existingSavings!=''){setTimeout(()=>{existingSavingsSlider.noUiSlider.set(existingSavings);},2000);}
case 7:if(roiSaving!=0&&roiSaving!=''){setTimeout(()=>{roiSavingSlider.noUiSlider.set(roiSaving);},2000);}
break;}}
function showTabContent(id){jQuery('.'+id.id).toggle();jQuery('#'+id.id).toggleClass('open');}
function calculateRetirementAmount(incomeRequired,rateOfInterest){let corpusRequired=(incomeRequired*12)*(100/rateOfInterest);document.getElementById('corpus_required').innerText=numberWithCommas(Math.round(corpusRequired));document.getElementById('income_per_month').innerText=numberWithCommas(Math.round(incomeRequired))+'/m';document.getElementById('corpus_roi').innerText=rateOfInterest;return corpusRequired;}
function calculateRequiredSavings(savingPerMonth,existingSavings,annualInterestRate,currentAge,retirementAge,targetCorpus){debugger;let duration=retirementAge-currentAge;let remainingCorpus=targetCorpus-existingSavings;annualInterestRate=annualInterestRate/100;const monthlyInterestRate=annualInterestRate/12;const durationMonths=duration*12;let powerFactor=1;for(let i=0;i<durationMonths;i++){powerFactor*=(1+monthlyInterestRate);}
const monthlySavings=(remainingCorpus*(monthlyInterestRate/(1-powerFactor)))*-1;document.getElementById('saving_required').innerText=numberWithCommas(Math.round(monthlySavings));document.getElementById('total_corpus').innerText=numberWithCommas(Math.round(remainingCorpus));document.getElementById('saving_roi').innerText=annualInterestRate*100;document.getElementById('further_saving_required').innerText=numberWithCommas(Math.round(monthlySavings-savingPerMonth));}
function numberWithCommas(x){return x.toString().split('.')[0].length>3?x.toString().substring(0,x.toString().split('.')[0].length-3).replace(/\B(?=(\d{2})+(?!\d))/g,",")+","+x.toString().substring(x.toString().split('.')[0].length-3):x.toString();}
jQuery("#calc_dropdown").click(function(){jQuery(".dropdown-menu").toggleClass("show");});jQuery(function(){jQuery('.lyt-calculator .question-list a[href*=\\#]').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=jQuery(this.hash);target=target.length?target:jQuery('[name='+this.hash.slice(1)+']');if(target.length){jQuery('html,body').animate({scrollTop:target.offset().top-100},1000);return false;}}});jQuery('.tab-content').hide();});