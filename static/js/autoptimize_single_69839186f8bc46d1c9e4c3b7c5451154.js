var winWidth=jQuery(window).width();var loadedInitially=false;var myChart;var amountSlider=document.getElementById('amount-rangslider');var ageSlider=document.getElementById('age-rangslider');var retirementAgeSlider=document.getElementById('retirement-age-rangslider');var roiSlider=document.getElementById('roi-rangslider');var annuitySlider=document.getElementById('annuity-rangslider');var annuityRoiSlider=document.getElementById('annuity-roi-rangslider');var amount,currentAge,retirementAge,roi,annuity,annuityRoi;accordion();function footerAcc(){jQuery('.popular-links .title').click(function(){jQuery(this).next('.links-wrap').stop(true,true).slideToggle();jQuery(this).toggleClass('active');});}
function mobMenu(){jQuery('.cp-header .menu-btn').on('click',function(){jQuery(this).toggleClass('open');jQuery('.cp-header nav').toggleClass('open');});}
jQuery(function(){if(winWidth<767){footerAcc();mobMenu();}
if(jQuery('.scroll-to-tab').length){var topPos=jQuery('.scroll-to-tab').offset().top;scrollToSection();}
var windowScrollPos;jQuery(window).on('scroll',function(e){windowScrollPos=jQuery(window).scrollTop();if(jQuery(this).scrollTop()>=70){jQuery('.cp-header').addClass('sticky');}else{jQuery('.cp-header').removeClass('sticky');}
if(winWidth>767){if(windowScrollPos>topPos){jQuery('.scroll-to-tab').addClass('sticky-me');}else{jQuery('.scroll-to-tab').removeClass('sticky-me');}}});});function accordion(){jQuery('.acc-head').click(function(e){var jQuerythis=jQuery(this);var parentElm=jQuerythis.closest('.acc-item');if(jQuerythis.hasClass('active')){parentElm.find('.acc-cont').removeClass('active');jQuerythis.removeClass('active');parentElm.find('.acc-cont').slideUp();}else{jQuery('.cp-accordion').find('.acc-cont').removeClass('active');jQuery('.cp-accordion').find('.acc-head').removeClass('active');jQuery('.cp-accordion').find('.acc-cont').slideUp();parentElm.find('.acc-cont, .acc-head').addClass('active');parentElm.find('.acc-cont').slideDown();}});}
function slidersInit(){noUiSlider.create(amountSlider,{start:5000,connect:'lower',range:{min:500,max:150000,},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0),},});noUiSlider.create(ageSlider,{start:24,connect:'lower',range:{min:18,max:60,},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0),},});noUiSlider.create(retirementAgeSlider,{start:70,connect:'lower',range:{min:60,max:75,},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0),},});noUiSlider.create(roiSlider,{start:9,connect:'lower',range:{min:5,max:12,},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0),},});noUiSlider.create(annuitySlider,{start:40,connect:'lower',range:{min:40,max:100,},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0),},});noUiSlider.create(annuityRoiSlider,{start:5,connect:'lower',range:{min:1,max:8,},format:{to:(v)=>parseFloat(v).toFixed(0),from:(v)=>parseFloat(v).toFixed(0),},});amountSlider.noUiSlider.on('update',function(values,handle){amount=Number(values[handle]);document.getElementById('amt-val').value=values[handle];calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);});ageSlider.noUiSlider.on('update',function(values,handle){currentAge=Number(values[handle]);document.getElementById('age-val').value=values[handle];calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);});retirementAgeSlider.noUiSlider.on('update',function(values,handle){retirementAge=Number(values[handle]);document.getElementById('ret-age-val').value=values[handle];calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);});roiSlider.noUiSlider.on('update',function(values,handle){roi=Number(values[handle]);document.getElementById('roi-val').value=values[handle];calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);});annuitySlider.noUiSlider.on('update',function(values,handle){annuity=Number(values[handle]);document.getElementById('annuity-val').value=values[handle];calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);});annuityRoiSlider.noUiSlider.on('update',function(values,handle){annuityRoi=Number(values[handle]);document.getElementById('annuity-roi-val').value=values[handle];calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);});calculateNps(amount,roi,currentAge,retirementAge,annuity,annuityRoi);}
function inputChange(value){amount=Number(document.getElementById('amt-val').value);currentAge=Number(document.getElementById('age-val').value);retirementAge=Number(document.getElementById('ret-age-val').value);roi=Number(document.getElementById('roi-val').value);annuity=Number(document.getElementById('annuity-val').value);annuityRoi=Number(document.getElementById('annuity-roi-val').value);switch(value){case 1:if(amount!=0&&amount!=''){setTimeout(()=>{amountSlider.noUiSlider.set(amount);},2000);}
break;case 2:if(currentAge!=0&&currentAge!=''){setTimeout(()=>{ageSlider.noUiSlider.set(currentAge);},2000);}
break;case 3:if(retirementAge!=0&&retirementAge!=''){setTimeout(()=>{retirementAgeSlider.noUiSlider.set(retirementAge);},2000);}
break;case 4:if(roi!=0&&roi!=''){setTimeout(()=>{roiSlider.noUiSlider.set(roi);},2000);}
break;case 5:if(annuity!=0&&annuity!=''){setTimeout(()=>{annuitySlider.noUiSlider.set(annuity);},2000);}
break;case 6:if(annuityRoi!=0&&annuityRoi!=''){setTimeout(()=>{annuityRoiSlider.noUiSlider.set(annuityRoi);},2000);}
break;}}
var barChartData={labels:[''],datasets:[{backgroundColor:'#C6C2F9',stack:'Stack 1',data:[3],},{backgroundColor:'#C6C2F9',stack:'Stack 0',data:['',4],},{backgroundColor:'#5F40AF',stack:'Stack 0',data:['',10],},],};var ctx=document.getElementById('myChart').getContext('2d');myChart=new Chart(ctx,{type:'bar',data:barChartData,options:{responsive:true,scaleShowLabels:false,plugins:{legend:{display:false,},title:{display:false,text:'',},tooltip:{enabled:false,},},scales:{xAxes:[{gridLines:{show:false,stacked:true,lineWidth:0,},},],yAxes:{display:false,stacked:true,},},},});function calculateNps(initialamount,roi,currentAge,retirementAge,annuity,annuityRoi){let finalAmt=0;let interestForMonth=0;let duration=(retirementAge-currentAge)*12;let totalInvested=initialamount*duration;let totalInterest=0;for(let i=1;i<=duration;i++){interestForMonth=initialamount*Math.pow(1+roi/1200,i)-5000;totalInterest+=interestForMonth;}
let maturityValue=totalInterest+totalInvested;let annuityVal=maturityValue*(annuity/100);let pensionAmount=(annuityVal*(annuityRoi/100))/12;document.getElementById('invest_amount').innerText=numberWithCommas(Math.round(totalInvested));document.getElementById('total_amount_pill').innerText=numberWithCommas(Math.round(maturityValue));document.getElementById('total_amount').innerText=numberWithCommas(Math.round(maturityValue));document.getElementById('annuity_amount').innerText=numberWithCommas(Math.round(annuityVal));document.getElementById('pension_amount').innerText=numberWithCommas(Math.round(pensionAmount));document.getElementById('retirement-age-seected').innerText=retirementAge;document.getElementById('annuity-rate').innerText=annuityRoi;myChart.data.datasets=[{borderRadius:{topLeft:10,topRight:10,},data:[totalInvested],backgroundColor:'#C6C2F9',stack:'stack 1',},{data:[totalInvested],backgroundColor:'#C6C2F9',stack:'stack 0',},{borderRadius:{topLeft:10,topRight:10,},data:[maturityValue],stack:'stack 0',backgroundColor:'#5F40AF',},];myChart.update();}
slidersInit();function numberWithCommas(x){return x.toString().split('.')[0].length>3?x.toString().substring(0,x.toString().split('.')[0].length-3).replace(/\B(?=(\d{2})+(?!\d))/g,',')+','+
x.toString().substring(x.toString().split('.')[0].length-3):x.toString();}
jQuery('#calc_dropdown').click(function(){jQuery('.dropdown-menu').toggleClass('show');});jQuery(function(){jQuery('.lyt-calculator .question-list a[href*=\\#]').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=jQuery(this.hash);target=target.length?target:jQuery('[name='+this.hash.slice(1)+']');if(target.length){jQuery('html,body').animate({scrollTop:target.offset().top-100,},1000);return false;}}});});function numberWithCommas(x){return x.toString().split('.')[0].length>3?x.toString().substring(0,x.toString().split('.')[0].length-3).replace(/\B(?=(\d{2})+(?!\d))/g,',')+','+
x.toString().substring(x.toString().split('.')[0].length-3):x.toString();}
jQuery('#calc_dropdown').click(function(){jQuery('.dropdown-menu').toggleClass('show');});jQuery(function(){jQuery('.lyt-calculator .question-list a[href*=\\#]').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=jQuery(this.hash);target=target.length?target:jQuery('[name='+this.hash.slice(1)+']');if(target.length){jQuery('html,body').animate({scrollTop:target.offset().top-100,},1000);return false;}}});});