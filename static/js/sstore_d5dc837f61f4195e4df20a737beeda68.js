var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,h,g){a instanceof String&&(a=String(a));for(var q=a.length,n=0;n<q;n++){var l=a[n];if(h.call(g,l,n,a))return{i:n,v:l}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,g){a!=Array.prototype&&a!=Object.prototype&&(a[h]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,h,g,q){if(h){g=$jscomp.global;a=a.split(".");for(q=0;q<a.length-1;q++){var n=a[q];n in g||(g[n]={});g=g[n]}a=a[a.length-1];q=g[a];h=h(q);h!=q&&null!=h&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,g){var h=this;h instanceof String&&(h=String(h));var n=h.length;g=g||0;for(0>g&&(g=Math.max(g+n,0));g<n;g++){var l=h[g];if(l===a||Object.is(l,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,h,g){if(null==a)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,g){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,g||0)}},"es6","es3");
var store=function(a){function h(){if("undefined"!=typeof newCheckoutFlowParams&&-1<newCheckoutFlowParams.indexOf("error="))showErrorNewCheckoutFlow(newCheckoutFlowParams);else{if(0==newCheckoutFlowParams.indexOf("FREE"))return a(".addToLibrary").trigger("click"),!1;document.getElementById("newCheckoutIframe").src=newCheckoutFlowParams;var b=!1;if(-1<newCheckoutFlowParams.indexOf("/t/public/pre-checkout")){if(b=!0,0<a("input[name='plan_id']").length){var c=a("input[name='plan_id']");a.each(c,function(c){-1<
newCheckoutFlowParams.indexOf(a(this).val())&&(a(this).prop("checked",!0),a(this).trigger("change"))})}}else b=!0;b&&!a("#newCheckoutHtml").hasClass("active")&&(("undefined"==typeof newCheckoutFlowParams||0>newCheckoutFlowParams.indexOf("/t/public/checkout"))&&window.showLoader(),a("#newCheckoutHtml").addClass("active"),a("body").attr("style","overflow-y: hidden !important;"))}}function g(){r=a("#cartHtml");0!=r.length&&(a("body").on("click",".buyBtn, a[href^='#purchasebutton']",function(b){b.preventDefault();
var c=a(this),f={type:"courses"},d=null;null!=localStorage.getItem("isAIAssistedReferred")&&(f.aiAssist=localStorage.getItem("isAIAssistedReferred"));null!=localStorage.getItem("documentReferrer")&&(f.referrer=localStorage.getItem("documentReferrer"));a(this).hasClass("plan-enroll-btn")&&(window.recurSubscriptionSelected="RECURRING"===a(this).data("plantype"));var e=getLocalSetting("utmSource");null!==e&&""!==e&&(f.utmSource=e);var k=getLocalSetting("utmMedium");null!==k&&""!==k&&(f.utmMedium=k);
var m=getLocalSetting("utmCampaign");null!==m&&""!==m&&(f.utmCampaign=m);var g=getLocalSetting("utmTerm");null!==g&&""!==g&&(f.utmTerm=g);var t=getLocalSetting("utmContent");null!==t&&""!==t&&(f.utmContent=t);void 0!==c.data("id")?d=c.data("id"):void 0!==c.attr("href")&&(b=c.attr("href").split("-"),1<b.length&&(d=b[1]));if(void 0===d)return!1;void 0!==c.data("pid")?f.pid=c.data("pid"):0<a("#productVariants").length&&(f.pid=a("#productVariants").val());void 0!==c.data("vid")?f.vid=c.data("vid"):void 0!==
f.pid&&0<a(".validityVariants."+f.pid+" select").length?f.vid=a(".validityVariants."+f.pid).find("select").val():0<a(".validityVariants.p1 select").length&&(f.vid=a(".validityVariants.p1").find("select").val());logAmplitude("buy_tapped_course_checkout",{plan_name:window.planName,price:window.planPrice,currency:a("#orgCurrencyCode").val(),course_id:window.planCourseId,is_package:window.isPackage,package_id:window.planPackageId});if("undefined"!==typeof checkoutV2&&"true"===checkoutV2)if("FREE"!==c.data("plantype")){if("undefined"!=
typeof newCheckoutFlowParams&&-1<newCheckoutFlowParams.indexOf("error=")){showErrorNewCheckoutFlow(newCheckoutFlowParams);return}(b=(new URLSearchParams(window.location.search)).get("abd"))||(b=!1);var h=(new URLSearchParams(window.location.search)).get("acsource");if(void 0==h||""==h)h="";var p=(new URLSearchParams(window.location.search)).get("templateId");if(void 0==p||""==p)p="";var l=(new URLSearchParams(window.location.search)).get("abdOrderId");if(void 0==l||""==l)l="";var v=(new URLSearchParams(window.location.search)).get("fomo");
v||(v=!1);a("#newCheckoutHtml").hasClass("active")?a("#newCheckoutIframe").attr("src","/single-checkout/"+d+"?buyNowBtn=true&pid="+(void 0!==f.pid?f.pid:"")+"&acsource="+h+"&abd="+b+"&fomo="+v+"&templateId="+p+"&abdOrderId="+l+"&utmSource="+e+"&utmCampaign="+m+"&utmMedium="+k+"&utmTerm="+g+"&utmContent="+t):(document.getElementById("newCheckoutIframe").contentWindow.location.replace("/single-checkout/"+d+"?buyNowBtn=true&pid="+(void 0!==f.pid?f.pid:"")+"&acsource="+h+"&abd="+b+"&fomo="+v+"&templateId="+
p+"&abdOrderId="+l+"&utmSource="+e+"&utmCampaign="+m+"&utmMedium="+k+"&utmTerm="+g+"&utmContent="+t),window.showLoader(),a("#newCheckoutHtml").addClass("active"),a("body").attr("style","overflow-y: hidden !important;"))}else return a(".addToLibrary").trigger("click"),!1;(e=(new URLSearchParams(window.location.search)).get("fomo"))||(e=!1);if("singlecheckout"===c.data("purchasetype")||window.recurSubscriptionSelected){b="/single-checkout/"+d+"?";void 0!==f.pid&&(b=b+"pid="+f.pid);void 0!==f.vid&&(b=
b+"vid="+f.vid);e&&(b=b.length-1==b.indexOf("?")?b+"fomo=true":b.includes("?")?b+"&fomo=true":b+"?fomo=true");e=getLocalSetting("utmSource");k=getLocalSetting("utmMedium");m=getLocalSetting("utmCampaign");g=getLocalSetting("utmTerm");t=getLocalSetting("utmContent");null!==e&&""!==e&&void 0!==e&&(b=b.length-1==b.indexOf("?")?b+"utmSource="+e:b.includes("?")?b+"&utmSource="+e:b+"?utmSource="+e,null!==k&&""!==k&&void 0!==k&&(b=b+"&utmMedium="+k),null!==m&&""!==m&&void 0!==m&&(b=b+"&utmCampaign="+m),
null!==g&&""!==g&&void 0!==g&&(b=b+"&utmTerm="+g),null!==t&&""!==t&&void 0!==t&&(b=b+"&utmContent="+t));e=c.data("price");k=c.data("price");void 0==k&&void 0!==gaprice&&(k=gaprice);a(this).hasClass("plan-enroll-btn")&&(e=gaprice);"undefined"===typeof gtag||"singlecheckout"!==c.data("purchasetype")||window.recurSubscriptionSelected||(m={price:parseFloat(k),currency:a("#orgCurrencyCode").val(),quantity:1},"ga4"===gaType?(m.item_id=c.data("id"),m.item_name=c.data("title"),m.item_category=c.data("coursecategory")):
(m.id=c.data("id"),m.name=c.data("title"),m.category=c.data("coursecategory")),gtag("event","begin_checkout",{currency:a("#orgCurrencyCode").val(),items:[m],value:parseFloat(k)}),"undefined"!==typeof checkoutV2&&"true"===checkoutV2||gtag("event","add_payment_info",{currency:a("#orgCurrencyCode").val(),items:[m],value:parseFloat(e)}));"undefined"!==typeof fbq&&"undefined"!==typeof checkoutV2&&"true"===checkoutV2&&(m=[],g=[],m.push({id:c.data("id"),quantity:1,content_category:c.data("coursecategory"),
content_name:c.data("title")}),g.push(c.data("id")),fbq("track","InitiateCheckout",{num_items:1,content_ids:g,contents:m,content_type:"packages"==c.data("type")?"package":"course",value:parseFloat(k),currency:a("#orgCurrencyCode").val()}));"undefined"===typeof dataLayer||"singlecheckout"!==c.data("purchasetype")||window.recurSubscriptionSelected||(m={price:parseFloat(k),currency:a("#orgCurrencyCode").val(),quantity:1},m.item_id=c.data("id"),m.item_name=c.data("title"),m.item_category=c.data("coursecategory"),
dataLayer.push({event:"begin_checkout",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[m],value:parseFloat(k)}}),"undefined"!==typeof checkoutV2&&"true"===checkoutV2||dataLayer.push({event:"add_payment_info",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[m],value:parseFloat(e)}}));k=parseFloat(e);e={courseId:d,courseTitle:c.data("title"),type:f.type,value:parseFloat(e)};parseFloat(c.data("setupfee"))&&(e=Object.assign({},e,{setupFee:c.data("setupfee")}),k=parseFloat(c.data("setupfee"))+
k);segmentTrack("Checkout Begin",{event:"begin_checkout",properties:e});"singlecheckout"!==c.data("purchasetype")||window.recurSubscriptionSelected||segmentTrack("Purchase Initiated",{event:"purchase_initiated",properties:{items:[e],currency:a("#orgCurrencyCode").val(),paymentMethod:"Payment Gateway",value:k}});if("undefined"!==typeof checkoutV2&&"true"===checkoutV2)return!1;location.href=b;return!1}if("undefined"!==typeof checkoutV2&&"true"===checkoutV2)return!1;!0===c.data("banner")&&(f.banner=
!0);e&&(f.fomo=!0);postData({url:ctx+"/cart/add/"+d,data:f,success:function(b,e){q();"undefined"!==typeof fbq&&fbq("track","AddToCart",{content_name:b.title,content_ids:[b.id],content_type:"Product",contents:[{id:b.id,quantity:1,content_category:b.category}],value:b.price,currency:a("#orgCurrencyCode").val()});"undefined"!==typeof ga&&(ga("require","ec"),ga("set","currencyCode",a("#orgCurrencyCode").val()),ga("ec:addProduct",{id:b.id,name:b.title,category:b.category,price:b.price,quantity:1}),ga("ec:setAction",
"add"),ga("send","event","UX","click","add to cart"));"undefined"!==typeof gtag&&(e={price:parseFloat(b.price),currency:a("#orgCurrencyCode").val(),quantity:1},"ga4"===gaType?(e.item_id=b.id,e.item_name=b.title,e.item_category=c.data("coursecategory")):(e.id=b.id,e.name=b.title,e.category=c.data("coursecategory")),gtag("event","add_to_cart",{currency:a("#orgCurrencyCode").val(),items:[e],value:parseFloat(b.price)}));"undefined"!==typeof dataLayer&&(e={price:parseFloat(b.price),currency:a("#orgCurrencyCode").val(),
quantity:1},e.item_id=b.id,e.item_name=b.title,e.item_category=c.data("coursecategory"),dataLayer.push({event:"add_to_cart",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[e],value:parseFloat(b.price)}}));"undefined"!==typeof spEventAddToCart&&spEventAddToCart();"courses"===f.type?segmentTrack("Add To Cart",{event:"add_to_cart",properties:{courseId:d,courseTitle:c.data("title"),value:parseFloat(b.price)}}):segmentTrack("Add To Cart",{event:"add_to_cart",properties:{courseId:d,packageTitle:c.data("title"),
value:parseFloat(b.price)}})}},{btn:c});return!1}),a("body").on("change",'form[name="planForm"] input[name="plan_id"]',function(){var b=a(this),c=b.closest('form[name="planForm"]').find("button.product-enroll");c.data("pid",b.val());c.data("price",b.data("price"));c.data("plantype",b.data("type"));var f="course";"packages"===c.data("type")&&(f="package");window.planType=b.data("type");window.planPrice=Number(b.data("price"));window.planName=getCoursePlanNameByTypeOrPrice(window.planType,window.planPrice);
0===b.data("price")?c.addClass("addToLibrary").removeClass("buyBtn").text("Get "+f+" for free"):c.addClass("buyBtn").removeClass("addToLibrary").text("Buy "+f+" for "+getCurrencySymbol(a("#orgCurrencyCode").val())+b.data("price"))}),a("body").on("change",'form[name="membershipPlanForm"] input[name="membership_plan_id"]',function(){var b=a(this),c=b.closest('form[name="membershipPlanForm"]').find("a.memebrshipSubcriptionBtn");c.data("plantype",b.data("type"));if(0===b.data("price"))c.text("Buy "+b.data("type")+
" plan for free");else{var f=b.data("currency")+b.data("price");c.text("Buy "+b.data("type")+" plan for "+f);c.attr("data-currency",b.data("currency"));c.attr("data-price",b.data("price"))}a("a.memebrshipSubcriptionBtn").attr("data-type",b.data("type"));a("a.memebrshipSubcriptionBtn").attr("href")&&(b=a("a.memebrshipSubcriptionBtn").attr("href").substring(0,a("a.memebrshipSubcriptionBtn").attr("href").indexOf("&plan="))+"&plan="+b.data("type"),a("a.memebrshipSubcriptionBtn").attr("href",b))}),a("body").on("click",
".addToLibrary, a[href^='#freebutton']",function(b){b.preventDefault();var c=a(this);b={};var f=null;if(void 0!==c.data("id"))f=c.data("id");else if(void 0!==c.attr("href")){var d=c.attr("href").split("-");1<d.length&&(f=d[1])}"undefined"!==typeof gtag&&"undefined"!==typeof SPUSER&&(d={price:0,currency:a("#orgCurrencyCode").val(),quantity:1},"ga4"===gaType?(d.item_id=c.data("id"),d.item_name=c.data("title"),d.item_category=c.data("coursecategory")):(d.id=c.data("id"),d.name=c.data("title"),d.category=
c.data("coursecategory")),gtag("event","begin_checkout",{currency:a("#orgCurrencyCode").val(),items:[d],value:0}));"undefined"!==typeof dataLayer&&"undefined"!==typeof SPUSER&&(d={price:0,currency:a("#orgCurrencyCode").val(),quantity:1},d.item_id=c.data("id"),d.item_name=c.data("title"),d.item_category=c.data("coursecategory"),dataLayer.push({event:"begin_checkout",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[d],value:0}}));"RECURRING"!=c.data("plantype")&&segmentTrack("Add To Cart",{event:"add_to_cart",
properties:{courseId:f,courseTitle:c.data("title"),value:0}});if("undefined"===typeof SPUSER){if(!a(this).hasClass("loginBtn")){if(0<a("#ssoCheckoutUrl").length){b=a.trim(a("#ssoCheckoutUrl").val());""!==b&&redirectToSSOUrl(b);return}if(0<a("#ssoSignupUrl").length){b=a.trim(a("#ssoSignupUrl").val());""!==b&&redirectToSSOUrl(b);return}"signup"!=checkoutRedirectGuestUsers||void 0==a("#loginFormHtml #microfe-popup-login").attr("src")||a("#loginFormHtml #microfe-popup-login").attr("src").includes("signup")||
a("#loginFormHtml #microfe-popup-login").attr("src","/t/public/login?signup");a("#loginFormHtml").addClass("active");"signup"==checkoutRedirectGuestUsers&&a("#newUserBtn").trigger("click")}saveLocalSetting("BEFORESIGNUPFREECOURSE",f);return!1}null!=c.data("pid")&&(b.pid=c.data("pid"));null!=c.data("vid")&&(b.vid=c.data("vid"));postData({url:ctx+"/users/courses/free/add/"+f,data:b,success:function(b,d){"undefined"!==typeof fbq&&fbq("track","StartTrial",{num_items:1,content_ids:[f],contents:[{id:f,
quantity:1,content_name:contentTitle,content_type:"product",content_category:content_category}],value:0,currency:a("#orgCurrencyCode").val(),content_type:"Product"});if("undefined"!==typeof gtag&&void 0!==b.ORDERID){var e={price:0,currency:a("#orgCurrencyCode").val(),quantity:1};"ga4"===gaType?(e.item_id=f,e.item_name=contentTitle,e.item_category=c.data("coursecategory")):(e.id=f,e.name=contentTitle,e.category=c.data("coursecategory"));gtag("event","purchase",{currency:a("#orgCurrencyCode").val(),
items:[e],transaction_id:b.ORDERID,value:0});segmentTrack("Purchase Completed",{event:"purchase_completed",properties:{items:[{courseId:f,quantity:1,courseName:contentTitle}],transactionId:b.ORDERID}})}"undefined"!==typeof dataLayer&&void 0!==b.ORDERID&&(e={price:0,currency:a("#orgCurrencyCode").val(),quantity:1},e.item_id=f,e.item_name=contentTitle,e.item_category=c.data("coursecategory"),dataLayer.push({event:"purchase",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[e],transaction_id:b.ORDERID,
value:0}}));if("packages"!==d.btn.data("type")){showAlert("green","Redirecting to your course in <b id='timer'>5</b> seconds");var k=ctx+"/courses/"+d.btn.data("id")+"/take?freecourseenrol=success"}else showAlert("green","Redirecting to my courses in <b id='timer'>5</b> seconds"),k=ctx+"/mycourses?freecourseenrol=success";if(b.ORDERID)b={orderId:b.ORDERID},d=getLocalSetting("utmSource"),null!==d&&""!==d&&(b.utmSource=d),d=getLocalSetting("utmMedium"),null!==d&&""!==d&&(b.utmMedium=d),d=getLocalSetting("utmCampaign"),
null!==d&&""!==d&&(b.utmCampaign=d),d=getLocalSetting("utmTerm"),null!==d&&""!==d&&(b.utmTerm=d),d=getLocalSetting("utmContent"),null!==d&&""!==d&&(b.utmContent=d),postData({url:ctx+"/transaction/utmfields/update",data:b,success:function(b,d){c.prop("disabled",!0);var e=5,f=setInterval(function(){e--;a("#timer").html(e);0>=e&&(window.clearInterval(f),location.href=k)},1E3)}},{});else{c.prop("disabled",!0);var g=5,h=setInterval(function(){g--;a("#timer").html(g);0>=g&&(window.clearInterval(h),location.href=
k)},1E3)}}},{btn:c});return!1}),a(".cartBtn").on("click",function(){q()}))}function q(){checkoutV2||(r.find("tbody tr").remove(),r.addClass("active"));getData({url:ctx+"/cart/get",data:{},success:function(b,c){var f=_.template(a("#cartItemTemplate").html()),d=b.items;if(0<d.length){if("undefined"!==typeof checkoutV2&&"true"===""+checkoutV2)return void 0==b.preCheckoutUrl&&void 0!==d[0].id&&(b.preCheckoutUrl="/single-checkout/"+d[0].id+"?pid="+(void 0!==d[0].pid?d[0].pid:"")),a("#newCheckoutHtml").hasClass("active")?
a("#newCheckoutIframe").attr("src",b.preCheckoutUrl+"&abandonedFlow"):(a("#newCheckoutIframe").attr("src",b.preCheckoutUrl+"&abandonedFlow"),a("#newCheckoutHtml").addClass("active"),a("body").attr("style","overflow-y: hidden !important;")),0<a("input[name='plan_id']").length&&(c=a("input[name='plan_id']"),a.each(c,function(c){-1<b.preCheckoutUrl.indexOf(a(this).val())&&(a(this).prop("checked",!0),a(this).trigger("change"))})),!1;var e="";c=[];for(var k=[],g=[],h=[],l=0,n=0;n<d.length;n++){var p=d[n];
e+=f({item:p,coverVersion:b["covers."+p.id]});"package"==p.type?g.push(p.id):k.push(p.id);c.includes(p.type)||c.push(p.type);h.includes(p.courseCategory)||h.push(p.courseCategory);void 0!=p.pgChargesLearnerPercent&&(l+=parseFloat((p.pgChargesLearnerPercent/100*p.price).toFixed(2)))}r.find("tbody").html(e);r.find(".totalAmount").text(parseFloat(b.total+l).toFixed(2));r.find(".msg").hide();r.find(".items").show();f=r.find("a[amplitude-event='checkout_tapped_course_checkout']");if(e=f.attr("amplitude-payload"))e=
JSON.parse(e),e.item_no=d.length,e.item_type=c,e.course_id=k,e.package_id=g,e.category=h,e.price=b.total,f.attr("amplitude-payload",JSON.stringify(e));(new URLSearchParams(window.location.search)).get("fomo")&&"undefined"==typeof SPUSER&&(c=f.attr("href"),c=c.length-1==c.indexOf("?")?c+"fomo=true":c.includes("?")?c+"&fomo=true":c+"?fomo=true",f.attr("href",c))}else r.find(".msg").hide(),r.find(".noItems").show();1==d.length&&void 0!==d[0].suggestInCart&&d[0].suggestInCart?(a(".suggestCart").show().find("h6").text(""!==
d[0].relatedContentLabel?d[0].relatedContentLabel:"You may also be interested in"),x(d[0].id)):a(".suggestCart").hide();a(".cartCount").text(d.length);a(".cartBtn").attr("data-badge",d.length);r.find(".removeItemBtn").off("click").on("click",function(){var b=a(this).closest("tr").data("id");if("undefined"!==typeof gtag){var c={price:parseFloat(a(this).closest("tr").data("price")),currency:a("#orgCurrencyCode").val(),quantity:1};"ga4"===gaType?(c.item_id=a(this).closest("tr").data("id"),c.item_name=
a(this).closest("tr").find(".itemTitle").text(),c.item_category=a(this).closest("tr").data("coursecategory")):(c.id=a(this).closest("tr").data("id"),c.name=a(this).closest("tr").find(".itemTitle").text(),c.category=a(this).closest("tr").data("coursecategory"));gtag("event","remove_from_cart",{currency:a("#orgCurrencyCode").val(),items:[c],value:parseFloat(a(this).closest("tr").data("price"))})}"undefined"!==typeof dataLayer&&(c={price:parseFloat(a(this).closest("tr").data("price")),currency:a("#orgCurrencyCode").val(),
quantity:1},c.item_id=a(this).closest("tr").data("id"),c.item_name=a(this).closest("tr").find(".itemTitle").text(),c.item_category=a(this).closest("tr").data("coursecategory"),dataLayer.push({event:"remove_from_cart",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[c],value:parseFloat(a(this).closest("tr").data("price"))}}));c={url:a(this).data("url"),data:{},success:function(c,e){e.btn.closest("tr").remove();for(var f=e=0;f<d.length;f++){var k=d[f];k.id!=b&&void 0!=k.pgChargesLearnerPercent&&
(e+=parseFloat((k.pgChargesLearnerPercent/100*k.price).toFixed(2)))}c=parseFloat(c.amount)+e;e=r.find(".cartTable tbody").find("tr").length;0==e&&(r.find(".msg").hide(),r.find(".noItems").show());a(".cartCount").text(e);a(".cartBtn").attr("data-badge",e);r.find(".totalAmount").text(c.toFixed(2))}};postData(c,{btn:a(this)})});a("#cookiePopup").hide()}},{})}function n(){var b=a("#loginFormHtml");0!=b.length&&(a("#alreadyUserBtn, #newUserBtn").on("click",function(){a(this).closest("form").hide();a(this).closest("form").siblings("form").show();
a("#socialLogin").hide();a("#normalLogin").show();a("#normalLoginBtn").show();a(".login-screen").css("margin-top","calc(50vh - "+a(".login-screen").height()/2+"px)")}),b.find(".loginForm .forgotPassword").off("click").on("click",function(){var c=a.trim(b.find(".loginForm").find("input[name='email']").val());if(""===c)return showAlert("red","Please fill the email !!!"),!1;postData({url:ctx+"/password/reset",data:{email:c},success:function(a){showAlert("green",a.message);b.find(".loginForm").find("input[name='email']").val("");
b.find(".loginForm").find("input[name='password']").val("");logAmplitude("forgot_password_tapped_login_page",{custom_domain:customDomain})}},{btn:a(this)})}),b.find(".loginForm").on("submit",function(b){a(this).find("button[type=submit]").addClass("loading").attr("disabled",!0);return!0}),b.find(".signupForm").find("input[type=file]").change(function(){5E5<this.files[0].size&&(showAlert("red","Image size can't be more than 500 KB !"),a(this).val(""))}),b.find(".signupForm").find("input[name=password]").on("input",
function(b){!0===passwordPolicyRequired&&isPasswordWeak(this.value)?a(this).closest(".form-group").addClass("has-error").removeClass("has-success"):!1===passwordPolicyRequired&&6>this.value.length?a(this).closest(".form-group").addClass("has-error").removeClass("has-success"):a(this).closest(".form-group").removeClass("has-error").addClass("has-success")}),b.find(".signupForm").on("submit",function(b){console.log("Signup Call 2");b.preventDefault();var c=a(this),d=c.serializeObject();if(!0===passwordPolicyRequired&&
isPasswordWeak(d.password)&&0>["google","fb"].indexOf(d.type)||!1===passwordPolicyRequired&&0>["google","fb"].indexOf(d.type)&&6>d.password.length)return c.find("input[name=password]").closest(".form-group").addClass("has-error").removeClass("has-success").find(".form-input-hint").show(),!1;if(void 0!==d.phone&&""!==d.phone&&(d.phone=getPhoneNumber(a("#sphone")),-1<d.phone.indexOf("+undefined")))return showAlert("red","Please select country phone code"),!1;b=getLocalSetting("utmSource");null!==b&&
""!==b&&(d.utmSource=b);b=getLocalSetting("utmMedium");null!==b&&""!==b&&(d.utmMedium=b);b=getLocalSetting("utmCampaign");null!==b&&""!==b&&(d.utmCampaign=b);b=getLocalSetting("utmTerm");null!==b&&""!==b&&(d.utmTerm=b);b=getLocalSetting("utmContent");null!==b&&""!==b&&(d.utmContent=b);if(0<c.find("input[type=file]").length){var e=c.find("input[type=file]").length;c.find("input[type=file]").each(function(){if(0<this.files.length){var b=this,f=new FormData,g=this.name;f.append("file",this.files[0]);
a.ajax({url:"/s/myprofile/upload/"+g,type:"POST",data:f,processData:!1,contentType:!1,success:function(f){f.response?(d[g]=f.fileName,a(b).val("").removeAttr("required"),e--,0==e&&l(c,d)):showAlert("red",a(b).attr("placeholder")+" : "+f.message)}}).fail(function(c,d,e){showAlert("red",a(b).attr("placeholder")+" : "+e)})}else e--,0==e&&l(c,d)})}else l(c,d);return!1}),a("body").on("click",".loginBtn",function(){a("#socialerror").length&&a("#socialerror").text("");if(0<a("#ssoLoginUrl").length){var c=
a.trim(a("#ssoLoginUrl").val());""!==c&&redirectToSSOUrl(c)}else a("body").addClass("overflowYDisable"),void 0!=b.find("#microfe-popup-login").attr("src")&&b.find("#microfe-popup-login").attr("src").includes("signup")&&b.find("#microfe-popup-login").attr("src","/t/public/login"),b.addClass("active"),a("#alreadyUserBtn").trigger("click")}),a("body").on("click",".signupBtn",function(){if("undefined"!==typeof SPUSER)location.href="/s/mycourses";else if(0<a("#ssoSignupUrl").length){var c=a.trim(a("#ssoSignupUrl").val());
""!==c&&redirectToSSOUrl(c)}else a("body").addClass("overflowYDisable"),void 0==b.find("#microfe-popup-login").attr("src")||b.find("#microfe-popup-login").attr("src").includes("signup")||b.find("#microfe-popup-login").attr("src","/t/public/login?signup"),b.addClass("active"),a("#newUserBtn").trigger("click")}))}function l(a,c){var b=a.attr("action");c={url:b,data:{formData:JSON.stringify(c),url:location.href},success:function(a,c){-1<b.indexOf("/signup/verify")?location.href=b:location.reload()}};
postData(c,{btn:a.find("button[type=submit]")})}function u(){getData({url:ctx+"/store/courses/categories",data:{queryData:"{}",level:0,occ:sessionCountry},success:function(b,c){if(1<b.data.length){var f=_.template(a("#categoryTemplate").html()),d="",e=[];a.each(b.data,function(b,c){b=a.trim(c._id["spayee:resource.spayee:filter1"]);""!==b&&null!==b&&"null"!==b&&e.push(c)});e.sort(function(a,b){return a._id["spayee:resource.spayee:filter1"].localeCompare(b._id["spayee:resource.spayee:filter1"])});a.each(e,
function(b,c){b=a.trim(c._id["spayee:resource.spayee:filter1"]);""!==b&&null!==b&&"null"!==b&&(d+=f({label:b}))});a(".categoriesBtn .menu").html(d)}else a(".categoriesBtn").remove()}},{})}function x(b){var c=a("#cartRelatedCont");0!=c.length&&getData({url:"/s/store/courses/related/"+b+"/get",data:{limit:6,occ:sessionCountry},success:function(b,d){c.removeClass("loading");b=b.data;d=_.template(a("#cartcoursecard-template").html());var e="";if(0==b.length)c.siblings("div").hide();else{for(var f=0;f<
b.length;f++)e+=d({item:b[f]});c.html(e)}}},{})}var r=null;"undefined"!=typeof showGraphyFomoFlag&&""!=showGraphyFomoFlag&&showGraphyFomo(showGraphyFomoFlag);window.closeCheckout=function(){a("#newCheckoutHtml").removeClass("active");a("#newCheckoutHtml #newCheckoutIframe").attr("src","");a("body").css("overflow-y","")};window.newCheckoutTryAgainFlow=function(){q()};window.addPaymentInfoTrigger=function(b){if("undefined"!==typeof fbq){var c=[],f=[];c.push({id:b.id,quantity:1,content_category:b.category,
content_name:b.title});f.push(b.id);fbq("track","AddPaymentInfo",{content_ids:f,contents:c,content_type:"normal"==b.type?"course":b.type,value:b.price,currency:a("#orgCurrencyCode").val()})}"undefined"!==typeof gtag&&(c={price:b.price,currency:a("#orgCurrencyCode").val(),quantity:1},"ga4"===gaType?(c.item_id=b.id,c.item_name=b.title,c.item_category=b.category):(c.id=b.id,c.name=b.title,c.category=b.category),gtag("event","add_payment_info",{currency:a("#orgCurrencyCode").val(),items:[c],value:b.price}));
"undefined"!==typeof dataLayer&&(c={price:b.price,currency:a("#orgCurrencyCode").val(),quantity:1},c.item_id=b.id,c.item_name=b.title,c.item_category=b.category,dataLayer.push({event:"add_payment_info",ecommerce:{currency:a("#orgCurrencyCode").val(),items:[c],value:b.price}}))};window.hideLoader=function(){a("#newCheckoutLoader").hide()};window.showLoader=function(){a("#newCheckoutLoader").show()};window.purchaseTrigger=function(b){if("undefined"!==typeof fbq){var c=[],f=[];c.push({id:b.id,quantity:1,
content_category:b.category,content_name:b.title});f.push(b.id);if(null==sessionStorage||null==sessionStorage.getItem("fbpixel-"+b.id))fbq("track","Purchase",{num_items:1,content_ids:f,contents:c,value:b.price,currency:a("#orgCurrencyCode").val(),content_type:"normal"==b.type?"course":b.type}),sessionStorage.setItem("fbpixel-"+b.id,Date.now())}if("undefined"!==typeof gtag){c=[];f=0;var d={};"ga4"===gaType?(d.item_id=b.id,d.item_name=b.title,d.item_category=b.category):(d.id=b.id,d.name=b.title,d.category=
b.category);d.price=b.price;d.quantity=1;d.currency=a("#orgCurrencyCode").val();f+=d.price;c.push(d);gtag("event","purchase",{currency:a("#orgCurrencyCode").val(),items:c,transaction_id:b.orderId,value:f})}"undefined"!==typeof dataLayer&&(c=[],f=0,d={},d.item_id=b.id,d.item_name=b.title,d.item_category=b.category,d.price=b.price,d.quantity=1,d.currency=a("#orgCurrencyCode").val(),f+=d.price,c.push(d),dataLayer.push({event:"purchase",ecommerce:{currency:a("#orgCurrencyCode").val(),items:c,transaction_id:b.orderId,
value:f}}))};a("#loginFormHtml .close").on("click",function(){a("#se").attr("readonly",!1);a("#fname").attr("readonly",!1);a("#sp").attr("required",!1);a("#sp").attr("disabled",!1);a(".signupForm")[0].reset()});var w=function(){function b(){a("body").find(".itemsContainer").each(function(){var b=a(this),c=void 0!==b.data("url")?ctx+b.data("url").replace("/store/","/store/subfilters/"):ctx+"/store/subfilters/courses",d={page:0,limit:void 0!==b.data("limit")?b.data("limit"):4,occ:sessionCountry};0>
c.indexOf("sortBy")&&(d.sortBy="recommended");getData({url:c,data:d,success:function(c,d){var e="";a.each(c["sub-home"].data,function(a,b){e+=l({item:b})});b.removeClass("loading").html(e)}},{})})}function c(){if(d)return!1;if(!h)return f(),!1;a(window).scrollTop()+a(window).height()>=e.children(".loading").offset().top&&f()}function f(){d=!0;var b=void 0!==e.data("url")?e.data("url"):ctx+"/store/subfilters/courses",f={page:Math.ceil(e.find(".scourse").length/g),limit:g,occ:sessionCountry};0>b.indexOf("sortBy")&&
(f.sortBy="recommended");getData({url:b,data:f,success:function(b,f){f="";for(var g=b["sub-home"].data,k=0;k<g.length;k++)f+=l({item:g[k]});e.children(".loading").before(f);registerAmplitude(e);if(b["sub-home"].total==e.find(".scourse").length||!h)e.children(".loading").hide(),0===e.find(".scourse").length&&0<e.find(".empty").length&&e.find(".empty").show(),a(window).off("scroll");else if(h)a(window).off("scroll").on("scroll",c);d=!1}},{})}var d=!1,e=null,g=16,h=!0,l=null;return{init:function(d,f){e=
a("#courseslist");0<a("#coursecard-template").length&&(l=_.template(a("#coursecard-template").html()));if(0==e.length&&0<a(".itemsContainer").length)b();else if(0<e.find(".scourse").length&&g>e.find(".scourse").length)e.children(".loading").hide();else if(g=f,h=d,c(),h)a(window).on("scroll",c)}}}(),y=function(){var b={};return{init:function(){a(".searchTxtBox").on("focus",function(c){var f=a(this);f.bind("keydown",function(b){b.keyCode===a.ui.keyCode.TAB&&a(this).autocomplete("instance").menu.active&&
b.preventDefault()}).autocomplete({source:function(c,e){var d=c.term;d in b?e(b[d]):a.getJSON(ctx+"/store/courses/suggest?query="+encodeURIComponent(f.val().toLowerCase().split(/,\s*/).pop()),function(a,c,f){b[d]=a;e(a)})},search:function(){if(2>this.value.split(/,\s*/).pop().length)return!1},focus:function(){return!1},select:function(a,b){a=this.value.split(/,\s*/);a.pop();a.push(b.item._id);this.value=a.join(", ");f.closest("form").submit();return!1}}).data("ui-autocomplete")._renderItem=function(b,
c){var d=this.element.val().toLowerCase();d=new RegExp("("+d+")","g");b.addClass("menu").detach().appendTo("body > div.spectre:eq(0)");return a("<li class='menu-item'>").append("<a>"+c._id.replace(d,"<strong>$&</strong>")+"</a>").appendTo(b)}})}}}();return{init:function(a){a&&u();w.init(!0,16)},bindEvents:function(){y.init();a(".redirectOnChange").change(function(){updateQueryStringParameter(a(this).attr("name"),a(this).val(),!0)});g();n();"undefined"!==typeof newCheckoutFlowParams&&h()},allCourses:w,
getRelatedContent:function(){var b=a("#relatedContent");if(0!=b.length){var c={url:b.data("url"),data:{},success:function(c,d){b.removeClass("loading");c=c.data;d=_.template(a("#coursecard-template").html());var e="";if(0==c.length)b.siblings("div").hide();else{for(var f=0;f<c.length;f++)e+=d({item:c[f]});b.html(e).find(".scourse").removeClass("col-3").addClass("col-12")}}};getData(c,{})}}}}(jQuery);
function updateQueryStringParameter(a,h,g){var q=window.location.href.split("?"),n="",l="",u="";1<q.length&&(n=q[0],l=q[1]);""!=h&&(u=a+"="+h);-1==l.indexOf(a+"=")?(""!=l&&(l+="&"),l+=u):(a=l.indexOf(a+"="),h=l.indexOf("&",a),-1==h&&(h=l.length),h=l.substring(a,h),""==u&&"&"==l[a-1]&&(h="&"+h),l=l.replace(h,u));g?window.location.replace(n+"?"+l):history.pushState({},null,n+"?"+l)}
function paramValueFromUrl(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.href);return null==a?null:decodeURIComponent(a[1]).replace("&","%26")};
